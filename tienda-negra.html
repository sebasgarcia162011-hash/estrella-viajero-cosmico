<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tienda Negra</title>

<style>
body{
    margin:0;
    font-family:'Georgia', serif;
    background:#0f0c09;
    color:#e8d8b0;
    text-align:center;
}

.menu-toggle{
    position:fixed;
    top:20px;
    left:20px;
    font-size:28px;
    cursor:pointer;
    z-index:1001;
    color:red;
}

.sidebar{
    position:fixed;
    top:0;
    left:-320px;
    width:300px;
    height:100%;
    background:#14110d;
    border-right:3px solid red;
    padding-top:80px;
    transition:0.4s;
    z-index:1000;
}

.sidebar.active{
    left:0;
}

.sidebar button{
    display:block;
    width:85%;
    margin:15px auto;
    padding:12px;
    font-size:18px;
    background:linear-gradient(45deg,#7a0000,#b30000);
    border:none;
    border-radius:10px;
    cursor:pointer;
    font-weight:bold;
    color:white;
}

.submenu{
    display:none;
    margin-left:20px;
}

.submenu button{
    font-size:15px;
    padding:8px;
}

.contenedor{
    max-width:1000px;
    margin:100px auto 40px auto;
    padding:30px;
    background:rgba(0,0,0,0.6);
    border:3px solid red;
    border-radius:25px;
}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    gap:20px;
    margin-top:30px;
}

.card{
    background:rgba(20,0,0,0.8);
    padding:20px;
    border-radius:15px;
    border:2px solid darkred;
}

.card button{
    margin-top:10px;
    padding:8px 15px;
    border:none;
    border-radius:10px;
    background:red;
    cursor:pointer;
    font-weight:bold;
    color:white;
}
</style>
</head>
<body>

<div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>

<div class="sidebar" id="sidebar">

    <button onclick="irInicio()">Inicio</button>

    <button onclick="toggleEquipar()">Equipar ‚ñæ</button>
    <div class="submenu" id="submenuEquipar">
        <button onclick="abrirPagina('equipar.html')">Mascota</button>
        <button onclick="abrirPagina('equipar.html')">T√≠tulo</button>
    </div>

    <button onclick="irClasificacion()">Clasificaci√≥n</button>

    <button onclick="toggleTienda()">Tienda ‚ñæ</button>
    <div class="submenu" id="submenuTienda">
        <button onclick="abrirPagina('tienda-mascotas.html')">Tienda Mascotas</button>
        <button onclick="abrirPagina('tienda-objetos.html')">Tienda Objetos</button>
        <button onclick="abrirPagina('tienda-venta.html')">Venta</button>
        <button onclick="abrirPagina('tienda-negra.html')">Tienda Negra</button>
    </div>

    <button onclick="irCreditos()">Cr√©ditos</button>

</div>

<div class="contenedor">
    <h1>‚ò† Tienda Negra ‚ò†</h1>
    <h3>Monedas: <span id="monedas"></span></h3>

    <div class="grid">

        <div class="card">
            <h3>Reliquia Prohibida</h3>
            <p>Precio: 4000</p>
            <button onclick="comprarRaro('Reliquia Prohibida',4000)">Comprar</button>
        </div>

        <div class="card">
            <h3>Poci√≥n Oscura Suprema</h3>
            <p>Precio: 2500</p>
            <button onclick="comprarRaro('Poci√≥n Oscura Suprema',2500)">Comprar</button>
        </div>

        <div class="card">
            <h3>Contrato Sombr√≠o</h3>
            <p>Precio: 3000</p>
            <button onclick="comprarRaro('Contrato Sombr√≠o',3000)">Comprar</button>
        </div>

        <div class="card">
            <h3>üê∫ Fenrir (Bloqueado)</h3>
            <p>Derrota al Drag√≥n Oscuro</p>
            <button onclick="intentarFenrir()">???</button>
        </div>

    </div>
</div>

<script>

/* ===== BARRA ===== */

function toggleMenu(){
    document.getElementById("sidebar").classList.toggle("active");
}

function abrirPagina(pagina){
    if(window.location.pathname.includes(pagina)){
        return;
    }
    window.location.href = pagina;
}

function irInicio(){
    if(window.location.pathname.includes("inicio2.html")){
        return;
    }
    window.location.href = "inicio2.html";
}

function irClasificacion(){
    if(window.location.pathname.includes("clasificacion.html")){
        return;
    }
    window.location.href = "clasificacion.html";
}

function irCreditos(){
    if(window.location.pathname.includes("creditos.html")){
        return;
    }
    window.location.href = "creditos.html";
}

function toggleEquipar(){
    let menu = document.getElementById("submenuEquipar");
    menu.style.display = menu.style.display === "block" ? "none" : "block";
}

function toggleTienda(){
    let menu = document.getElementById("submenuTienda");
    menu.style.display = menu.style.display === "block" ? "none" : "block";
}

/* ===== SISTEMA TIENDA NEGRA ===== */

let monedas = parseInt(localStorage.getItem("monedasJugador")) || 0;
document.getElementById("monedas").textContent = monedas;

function comprarRaro(nombre,precio){

    if(monedas < precio){
        alert("No tienes suficientes monedas.");
        return;
    }

    let inventario = JSON.parse(localStorage.getItem("inventarioObjetos")) || [];

    monedas -= precio;
    inventario.push(nombre);

    localStorage.setItem("monedasJugador", monedas);
    localStorage.setItem("inventarioObjetos", JSON.stringify(inventario));

    document.getElementById("monedas").textContent = monedas;

    alert("Has adquirido un objeto oscuro.");
}

function intentarFenrir(){

    let desbloqueado = localStorage.getItem("dragonOscuroDerrotado");

    if(desbloqueado === "si"){

        let mascotas = JSON.parse(localStorage.getItem("inventarioMascotas")) || [];

        if(!mascotas.includes("Fenrir")){
            mascotas.push("Fenrir");
            localStorage.setItem("inventarioMascotas", JSON.stringify(mascotas));
            alert("Has obtenido a Fenrir.");
        }else{
            alert("Ya posees a Fenrir.");
        }

    }else{
        alert("Derrota al Drag√≥n Oscuro para desbloquear esta criatura.");
    }
}

</script>

</body>
</html>